{{extend 'layout.html'}}
<div class="map-cont box">
    <div id="map" style="height: 500px"></div>
</div>
<script>
    var map = L.map('map').setView([46.498333, 11.355151], 15);
    L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {
        attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'
    }).addTo(map);
    $.getJSON('{{=URL('default', 'get_geojson')}}', function( data ) { 
        L.geoJson(data, {
            onEachFeature: onEachFeature}).addTo(map); 
    });
    
    function onEachFeature (feature, layer) {
        var popupContent;
        if (feature.properties && feature.properties.popupContent) {
            popupContent = feature.properties.popupContent;
        }
 
        layer.bindPopup(popupContent);
    }
</script>
