{{if globals().get('tooltip', False):}}
<div id="park_{{=park['park_id']}}" class="carpark">
{{else:}}
<div id="park_{{=park['park_id']}}" class="carpark box {{='odd' if (pos+1)%2==1 else ''}} {{='third' if (pos+1)%3==0 else ''}}">
{{pass}}
<div class="carpark-aux">
	<h2>{{=park['name']}}</h2>
	<ul>
		<li class="address"><a href="{{=URL('default', 'map', vars={'parking_id':park['park_id']})}}">{{=park['address']}}</a></li>
		<li class="phone"><a href="tel:{{=(park['phone'] or '--')}}">{{=(park['phone'] or '--')}}</a></li>
	</ul>
	<div class="slots"><strong class="available-slots {{='full' if park['freeslots'] < 10 else ('almost-full' if park['freeslots'] < 70 else 'available')}}"><span class="number">{{=park['freeslots']}}</span> posti liberi</strong> su <strong>{{=park['slots']}} posti totali</strong></div>
	<div class="forecast">
		<h3>Previsione 24h</h3>

		<div class="graph" id="graph_{{=park['park_id']}}" style="height: 300px">

		</div>
	</div>	
</div>
</div>
<script>
    var options = {
			    series: {
				    lines: {
					    show: false
				    },
				    points: {
					    show: false
				    },
				    bars: {
				        show: true
				    }
			    },
			    grid: {
			color: "#444444",
			/*	backgroundColor: "#DDDDDD",*/
			backgroundColor: {
				colors: ["#fff", "#e4f4f4"]
			},
			borderColor: "#FFFFFF",
			tickColor: "#CCCCCC",
			//aboveData: false,
			borderWidth: 1,
			clickable: true,
			hoverable: true,
			autoHighlight: true,
			markings: function(axes) {
				var markings = [];
				var xaxis = axes.xaxis;
				for (var x = Math.floor(xaxis.min); x < xaxis.max; x += xaxis.tickSize * 2) {
					markings.push({ xaxis: { from: x, to: x + xaxis.tickSize }, color: "rgba(232, 232, 255, 0.2)" });
				}
				return markings;
			}
		},
			    
			    xaxis: {
				    tickDecimals: 0
			    },
			    yaxis: {
				    min: 0
			    },
			    selection: {
				    mode: "x"
			    },
			    legend: false,
			    threshold: {
					below: 20,
					color: "rgb(200, 20, 30)"
				},
		    };
    var data = [{
			label: "United States",
			data: [[1990, 18.9], [1991, 18.7], [1992, 18.4], [1993, 19.3], [1994, 19.5], [1995, 19.3], [1996, 19.4], [1997, 20.2], [1998, 19.8], [1999, 19.9], [2000, 20.4], [2001, 20.1], [2002, 20.0], [2003, 19.8], [2004, 20.4]]
		}];	    
    var placeholder = $("{{='#graph_%s' % park['park_id']}}");
    var plot = $.plot(placeholder, data, options);
</script>
