{{if globals().get('tooltip', False):}}
<div id="park_{{=park['park_id']}}" class="carpark">
{{else:}}
<div id="park_{{=park['park_id']}}" class="carpark box {{='odd' if (pos+1)%2==1 else ''}} {{='third' if (pos+1)%3==0 else ''}}">
{{pass}}
<div class="carpark-aux">
	<h2>{{=park['name']}}</h2>
	<ul>
		<li class="address"><a href="{{=URL('default', 'map', vars={'parking_id':park['park_id']})}}">{{=park['address']}}</a></li>
		<li class="phone"><a href="tel:{{=(park['phone'] or '--')}}">{{=(park['phone'] or '--')}}</a></li>
	</ul>
	<div class="slots"><strong class="available-slots {{='full' if park['freeslots'] < 10 else ('almost-full' if park['freeslots'] < 70 else 'available')}}"><span class="number">{{=park['freeslots']}}</span> posti liberi</strong> su <strong>{{=park['slots']}} posti totali</strong></div>
	<div class="forecast">
		<h3>Previsione 24h</h3>

		<div class="graph" id="graph_{{=park['park_id']}}" style="height: 136px">

		</div>
	</div>	
</div>
</div>
{{if globals().get('pos', False) and ((pos+1)%3==0):}}
<div class="clear-box"></div>
{{pass}}

<script>
    var options = {
			    series: {
				    lines: {
					    show: false, 
				    },
				    points: {
					    show: false
				    },
				    bars: {
				        show: true, barWidth: 0.6, fill: 1,  lineWidth:0
				    }
			    },
			    grid: {
			color: "#444444",
			/*	backgroundColor: "#DDDDDD",*/
			backgroundColor: {
				colors: ["#fff", "#e4f4f4"]
			},
			borderColor: "#FFFFFF",
			//tickColor: "#CCCCCC",
			//aboveData: false,
			//borderWidth: 1,
			clickable: true,
			hoverable: false,
			autoHighlight: true,
			/*markings: function(axes) {
				var markings = [];
				var xaxis = axes.xaxis;
				for (var x = Math.floor(xaxis.min); x < xaxis.max; x += xaxis.tickSize * 2) {
					markings.push({ xaxis: { from: x, to: x + xaxis.tickSize }, color: "rgba(232, 232, 255, 0.2)" });
				}
				return markings;
			}*/
		},
			    
			    xaxis: {
				    tickDecimals: 0
			    },
			    yaxis: {
				    min: 0
			    },
			    selection: {
				    mode: "x"
			    },
			    legend: false,
			    
		    };
    var data = [{
			label: "United States", threshold: [{
					below: 21,
					color: "rgb(247,154,8)"
				}, {
					below: 19,
					color: "rgb(200, 20, 30)"
				}], color: "rgb(111,170,41)",
			data: [[1990, 18.9], [1991, 18.7], [1992, 18.4], [1993, 30], [1994, 19.5], [1995, 19.3], [1996, 19.4], [1997, 20.2], [1998, 19.8]]
		}];	    
    var placeholder = $("{{='#graph_%s' % park['park_id']}}");
    var plot = $.plot(placeholder, data, options);
</script>
